# Запуск

## Загрузка на QEMU
Собранный образ можно запустить QEMU. Самый простой способ - выполнить скрипт ./scripts/qemu/auto_qemu:

```
$ sudo ./scripts/qemu/auto_qemu
```
Этот скрипт создает tuntab, для чего ему нужны права суперпользователя. Кроме того, в скрипте используется утилита ethtool. Установка для основанных на Debian систем:

```
$ sudo apt-get install ethtool
```
Если запуск прошел успешно, то на экране QEMU будут выводиться сообщения. После загрузки системы появится приглашение "embox>", теперь можно запускать команды на выполнение. Например, "help" выведет список доступных команд.

Для проверки соединения можно пропинговать интерфейс 10.0.2.16. Если соединение установлено, к терминалу можно подключиться по telnet.

Для выхода из Qemu нужно набрать последовательность ctrl + 'a', затем 'X'. 


# Отладка

Для работы в режиме отладки можно использовать тот же скрипт, передав ему в качестве параметров флаги -s -S -no-kvm, то есть:

```
$ sudo ./scripts/qemu/auto_qemu -s -S -no-kvm
```
После этого QEMU будет ожидать подключения gdb-клиентом.

Для отладки с помощью консольного отладчика В другом терминале нужно запустить gdb:

```
$ gdb ./build/base/bin/embox
...
(gdb) target extended-remote :1234 
(gdb) continue
```
Cистема начнет загрузку.

В любой момент в терминале gdb можно нажать ctrl + 'c', посмотреть стек текущего потока (backtrace), установить точки останова (break <имя функции>, break <имя файла>:<номер строки>). 
